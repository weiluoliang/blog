import{a as P,b as X,k as F,c as Z,d as j,e as W,P as L,B as G,f as E}from"./app-94a15260.js";import{r as m,h as Q,c as $,B as _,D as ee,F as te,o as ae,C as se,j as e,R as w,w as le,p as ne,i as oe}from"./framework-c51ec70f.js";const re="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";const B=()=>e(L,{name:"close"},()=>e("path",{d:"m925.468 822.294-303.27-310.288L925.51 201.674c34.683-27.842 38.3-75.802 8.122-107.217-30.135-31.37-82.733-34.259-117.408-6.463L512.001 399.257 207.777 87.993C173.1 60.197 120.504 63.087 90.369 94.456c-30.179 31.415-26.561 79.376 8.122 107.217L401.8 512.005l-303.27 310.29c-34.724 27.82-38.34 75.846-8.117 107.194 30.135 31.437 82.729 34.327 117.408 6.486L512 624.756l304.177 311.22c34.68 27.84 87.272 24.95 117.408-6.487 30.223-31.348 26.56-79.375-8.118-107.195z"}));B.displayName="CloseIcon";const T=()=>e(L,{name:"heading"},()=>e("path",{d:"M250.4 704.6H64V595.4h202.4l26.2-166.6H94V319.6h214.4L352 64h127.8l-43.6 255.4h211.2L691 64h126.2l-43.6 255.4H960v109.2H756.2l-24.6 166.6H930v109.2H717L672 960H545.8l43.6-255.4H376.6L333 960H206.8l43.6-255.4zm168.4-276L394 595.4h211.2l24.6-166.6h-211z"}));T.displayName="HeadingIcon";const V=()=>e(L,{name:"heart"},()=>e("path",{d:"M1024 358.156C1024 195.698 892.3 64 729.844 64c-86.362 0-164.03 37.218-217.844 96.49C458.186 101.218 380.518 64 294.156 64 131.698 64 0 195.698 0 358.156 0 444.518 37.218 522.186 96.49 576H96l320 320c32 32 64 64 96 64s64-32 96-64l320-320h-.49c59.272-53.814 96.49-131.482 96.49-217.844zM841.468 481.232 517.49 805.49a2981.962 2981.962 0 0 1-5.49 5.48c-1.96-1.95-3.814-3.802-5.49-5.48L182.532 481.234C147.366 449.306 128 405.596 128 358.156 128 266.538 202.538 192 294.156 192c47.44 0 91.15 19.366 123.076 54.532L512 350.912l94.768-104.378C638.696 211.366 682.404 192 729.844 192 821.462 192 896 266.538 896 358.156c0 47.44-19.368 91.15-54.532 123.076z"}));V.displayName="HeartIcon";const K=()=>e(L,{name:"history"},()=>e("path",{d:"M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512zm0-896a384 384 0 1 0 384 384 384 384 0 0 0-384-384zm192 448H512a64 64 0 0 1-64-64V320a64 64 0 0 1 128 0v128h128a64 64 0 0 1 0 128z"}));K.displayName="HistoryIcon";const I=()=>e(L,{name:"title"},()=>e("path",{d:"M512 256c70.656 0 134.656 28.672 180.992 75.008A254.933 254.933 0 0 1 768 512c0 83.968-41.024 157.888-103.488 204.48C688.96 748.736 704 788.48 704 832c0 105.984-86.016 192-192 192-106.048 0-192-86.016-192-192h128a64 64 0 1 0 128 0 64 64 0 0 0-64-64 255.19 255.19 0 0 1-181.056-75.008A255.403 255.403 0 0 1 256 512c0-83.968 41.024-157.824 103.488-204.544C335.04 275.264 320 235.584 320 192A192 192 0 0 1 512 0c105.984 0 192 85.952 192 192H576a64.021 64.021 0 0 0-128 0c0 35.328 28.672 64 64 64zM384 512c0 70.656 57.344 128 128 128s128-57.344 128-128-57.344-128-128-128-128 57.344-128 128z"}));I.displayName="TitleIcon";const ce={0:"分类：$content",1:"标签：$content"},ie=300,J=5,ue={"/":{cancel:"Cancel",placeholder:"Search",search:"Search",select:"to select",navigate:"to navigate",exit:"to exit",history:"Search History",emptyHistory:"Empty Search History",emptyResult:"No results found",loading:"Loading search indexes..."}},he="search-pro-history-results",q=P(he,[]),ve=()=>({history:q,addHistory:a=>{q.value.length<J?q.value=[a,...q.value]:q.value=[a,...q.value.slice(0,J-1)]},removeHistory:a=>{q.value=[...q.value.slice(0,a),...q.value.slice(a+1)]}}),pe=m(re),de=Q(()=>JSON.parse(G(pe.value))),D=(a,h)=>{const v=a.toLowerCase(),s=h.toLowerCase(),o=[];let l=0,u=0;const p=(t,d=!1)=>{let n="";u===0?n=t.length>20?`… ${t.slice(-20)}`:t:d?n=t.length+u>100?`${t.slice(0,100-u)}… `:t:n=t.length>20?`${t.slice(0,20)} … ${t.slice(-20)}`:t,n&&o.push(n),u+=n.length,d||(o.push(["strong",h]),u+=h.length,u>=100&&o.push(" …"))};let f=v.indexOf(s,l);if(f===-1)return null;for(;f>=0;){const t=f+s.length;if(p(a.slice(l,f)),l=t,u>100)break;f=v.indexOf(s,l)}return u<100&&p(a.slice(l),!0),o},M=a=>a.reduce((h,{type:v})=>h+(v==="title"?50:v==="heading"?20:v==="custom"?10:1),0),fe=(a,h)=>{var v;const s={};for(const[o,l]of Object.entries(h)){const u=((v=h[o.replace(/\/[^\\]*$/,"")])==null?void 0:v.title)||"",p=`${u?`${u} > `:""}${l.title}`,f=D(l.title,a);f&&(s[p]=[...s[p]||[],{type:"title",path:o,display:f}]),l.customFields&&Object.entries(l.customFields).forEach(([t,d])=>{d.forEach(n=>{const r=D(n,a);r&&(s[p]=[...s[p]||[],{type:"custom",path:o,index:t,display:r}])})});for(const t of l.contents){const d=D(t.header,a);d&&(s[p]=[...s[p]||[],{type:"heading",path:o+(t.slug?`#${t.slug}`:""),display:d}]);for(const n of t.contents){const r=D(n,a);r&&(s[p]=[...s[p]||[],{type:"content",header:t.header,path:o+(t.slug?`#${t.slug}`:""),display:r}])}}}return Object.keys(s).sort((o,l)=>M(s[o])-M(s[l])).map(o=>({title:o,contents:s[o]}))},ye=a=>{const h=X(),v=m([]),s=Q(()=>de.value[h.value]),o=E(l=>{v.value=l?fe(l,s.value):[]},ie);return le([a,h],()=>{o(a.value)}),v};var me=$({name:"SearchResult",props:{query:{type:String,required:!0}},emits:{close:()=>!0,updateQuery:a=>!0},setup(a,{emit:h}){const v=_(),s=ee(),o=X(),l=F(ue),{history:u,addHistory:p,removeHistory:f}=ve(),t=te(a,"query"),d=ye(t),n=m(0),r=m(0),C=m(),R=Q(()=>d.value.length>0),H=Q(()=>d.value[n.value]||null),b=()=>{n.value=n.value>0?n.value-1:d.value.length-1,r.value=H.value.contents.length-1},A=()=>{n.value=n.value<d.value.length-1?n.value+1:0,r.value=0},U=()=>{r.value<H.value.contents.length-1?r.value=r.value+1:A()},N=()=>{r.value>0?r.value=r.value-1:b()},O=c=>c.map(i=>oe(i)?i:e(i[0],i[1])),z=c=>{if(c.type==="custom"){const i=ce[c.index]||"$content",[g,S=""]=ne(i)?i[o.value].split("$content"):i.split("$content");return O([g,...c.display,S])}return O(c.display)},x=()=>{n.value=0,r.value=0,h("updateQuery",""),h("close")};return ae(()=>{Z("keydown",c=>{if(R.value){if(c.key==="ArrowUp")N();else if(c.key==="ArrowDown")U();else if(c.key==="Enter"){const i=H.value.contents[r.value];s.path!==i.path&&(p(i),v.push(i.path),x())}}}),j(C.value,{reserveScrollBarGap:!0})}),se(()=>{W()}),()=>e("div",{class:["search-pro-result",{empty:t.value===""?u.value.length===0:!R.value}],ref:C},t.value===""?u.value.length?e("ul",{class:"search-pro-result-list"},e("li",{class:"search-pro-result-list-item"},[e("div",{class:"search-pro-result-title"},l.value.history),u.value.map((c,i)=>e(w,{to:c.path,class:["search-pro-result-item",{active:r.value===i}],onClick:()=>{console.log("click"),x()}},()=>[e(K,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[c.type==="content"&&c.header?e("div",{class:"content-header"},c.header):null,e("div",z(c))]),e("button",{class:"search-pro-close-icon",onClick:g=>{g.preventDefault(),g.stopPropagation(),f(i)}},e(B))]))])):l.value.emptyHistory:R.value?e("ul",{class:"search-pro-result-list"},d.value.map(({title:c,contents:i},g)=>{const S=n.value===g;return e("li",{class:["search-pro-result-list-item",{active:S}]},[e("div",{class:"search-pro-result-title"},c||"Documentation"),i.map((y,Y)=>{const k=S&&r.value===Y;return e(w,{to:y.path,class:["search-pro-result-item",{active:k,"aria-selected":k}],onClick:()=>{p(y),x()}},()=>[y.type==="content"?null:e(y.type==="title"?I:y.type==="heading"?T:V,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[y.type==="content"&&y.header?e("div",{class:"content-header"},y.header):null,e("div",z(y))])])})])})):l.value.emptyResult)}});export{me as default};
