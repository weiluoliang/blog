import{a as B,b as Z,k as G,c as X,d as b,e as E,P as z,B as T,f as Y}from"./app-6616255f.js";import{r as k,h as L,c as $,B as _,D as ee,F as te,o as ae,C as se,j as e,R as I,w as le,p as oe,i as re}from"./framework-c51ec70f.js";const ne="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";const A=()=>e(z,{name:"close"},()=>e("path",{d:"m925.468 822.294-303.27-310.288L925.51 201.674c34.683-27.842 38.3-75.802 8.122-107.217-30.135-31.37-82.733-34.259-117.408-6.463L512.001 399.257 207.777 87.993C173.1 60.197 120.504 63.087 90.369 94.456c-30.179 31.415-26.561 79.376 8.122 107.217L401.8 512.005l-303.27 310.29c-34.724 27.82-38.34 75.846-8.117 107.194 30.135 31.437 82.729 34.327 117.408 6.486L512 624.756l304.177 311.22c34.68 27.84 87.272 24.95 117.408-6.487 30.223-31.348 26.56-79.375-8.118-107.195z"}));A.displayName="CloseIcon";const J=()=>e(z,{name:"heading"},()=>e("path",{d:"M250.4 704.6H64V595.4h202.4l26.2-166.6H94V319.6h214.4L352 64h127.8l-43.6 255.4h211.2L691 64h126.2l-43.6 255.4H960v109.2H756.2l-24.6 166.6H930v109.2H717L672 960H545.8l43.6-255.4H376.6L333 960H206.8l43.6-255.4zm168.4-276L394 595.4h211.2l24.6-166.6h-211z"}));J.displayName="HeadingIcon";const N=()=>e(z,{name:"heart"},()=>e("path",{d:"M1024 358.156C1024 195.698 892.3 64 729.844 64c-86.362 0-164.03 37.218-217.844 96.49C458.186 101.218 380.518 64 294.156 64 131.698 64 0 195.698 0 358.156 0 444.518 37.218 522.186 96.49 576H96l320 320c32 32 64 64 96 64s64-32 96-64l320-320h-.49c59.272-53.814 96.49-131.482 96.49-217.844zM841.468 481.232 517.49 805.49a2981.962 2981.962 0 0 1-5.49 5.48c-1.96-1.95-3.814-3.802-5.49-5.48L182.532 481.234C147.366 449.306 128 405.596 128 358.156 128 266.538 202.538 192 294.156 192c47.44 0 91.15 19.366 123.076 54.532L512 350.912l94.768-104.378C638.696 211.366 682.404 192 729.844 192 821.462 192 896 266.538 896 358.156c0 47.44-19.368 91.15-54.532 123.076z"}));N.displayName="HeartIcon";const V=()=>e(z,{name:"history"},()=>e("path",{d:"M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512zm0-896a384 384 0 1 0 384 384 384 384 0 0 0-384-384zm192 448H512a64 64 0 0 1-64-64V320a64 64 0 0 1 128 0v128h128a64 64 0 0 1 0 128z"}));V.displayName="HistoryIcon";const K=()=>e(z,{name:"title"},()=>e("path",{d:"M512 256c70.656 0 134.656 28.672 180.992 75.008A254.933 254.933 0 0 1 768 512c0 83.968-41.024 157.888-103.488 204.48C688.96 748.736 704 788.48 704 832c0 105.984-86.016 192-192 192-106.048 0-192-86.016-192-192h128a64 64 0 1 0 128 0 64 64 0 0 0-64-64 255.19 255.19 0 0 1-181.056-75.008A255.403 255.403 0 0 1 256 512c0-83.968 41.024-157.824 103.488-204.544C335.04 275.264 320 235.584 320 192A192 192 0 0 1 512 0c105.984 0 192 85.952 192 192H576a64.021 64.021 0 0 0-128 0c0 35.328 28.672 64 64 64zM384 512c0 70.656 57.344 128 128 128s128-57.344 128-128-57.344-128-128-128-128 57.344-128 128z"}));K.displayName="TitleIcon";const ce={0:"分类：$content",1:"标签：$content"},ie=300,U=5,ue={"/":{cancel:"Cancel",placeholder:"Search",search:"Search",select:"to select",navigate:"to navigate",exit:"to exit",history:"Search History",emptyHistory:"Empty Search History",emptyResult:"No results found",loading:"Loading search indexes..."}},pe="search-pro-history-results",m=B(pe,[]),he=()=>({history:m,addHistory:a=>{m.value.length<U?m.value=[a,...m.value]:m.value=[a,...m.value.slice(0,U-1)]},removeHistory:a=>{m.value=[...m.value.slice(0,a),...m.value.slice(a+1)]}}),ve=k(ne),de=L(()=>JSON.parse(T(ve.value))),j=(a,p)=>{const h=a.toLowerCase(),s=p.toLowerCase(),r=[];let l=0,u=0;const v=(t,d=!1)=>{let o="";u===0?o=t.length>20?`… ${t.slice(-20)}`:t:d?o=t.length+u>100?`${t.slice(0,100-u)}… `:t:o=t.length>20?`${t.slice(0,20)} … ${t.slice(-20)}`:t,o&&r.push(o),u+=o.length,d||(r.push(["strong",p]),u+=p.length,u>=100&&r.push(" …"))};let y=h.indexOf(s,l);if(y===-1)return null;for(;y>=0;){const t=y+s.length;if(v(a.slice(l,y)),l=t,u>100)break;y=h.indexOf(s,l)}return u<100&&v(a.slice(l),!0),r},M=a=>a.reduce((p,{type:h})=>p+(h==="title"?50:h==="heading"?20:h==="custom"?10:1),0),ye=(a,p)=>{var h;const s={};for(const[r,l]of Object.entries(p)){const u=((h=p[r.replace(/\/[^\\]*$/,"")])==null?void 0:h.title)||"",v=`${u?`${u} > `:""}${l.title}`,y=j(l.title,a);y&&(s[v]=[...s[v]||[],{type:"title",path:r,display:y}]),l.customFields&&Object.entries(l.customFields).forEach(([t,d])=>{d.forEach(o=>{const n=j(o,a);n&&(s[v]=[...s[v]||[],{type:"custom",path:r,index:t,display:n}])})});for(const t of l.contents){const d=j(t.header,a);d&&(s[v]=[...s[v]||[],{type:"heading",path:r+(t.slug?`#${t.slug}`:""),display:d}]);for(const o of t.contents){const n=j(o,a);n&&(s[v]=[...s[v]||[],{type:"content",header:t.header,path:r+(t.slug?`#${t.slug}`:""),display:n}])}}}return Object.keys(s).sort((r,l)=>M(s[r])-M(s[l])).map(r=>({title:r,contents:s[r]}))},fe=a=>{const p=Z(),h=k([]),s=L(()=>de.value[p.value]),r=Y(l=>{h.value=l?ye(l,s.value):[]},ie);return le([a,p],()=>{r(a.value)}),h};var ke=$({name:"SearchResult",props:{query:{type:String,required:!0}},emits:{close:()=>!0,updateQuery:a=>!0},setup(a,{emit:p}){const h=_(),s=ee(),r=Z(),l=G(ue),{history:u,addHistory:v,removeHistory:y}=he(),t=te(a,"query"),d=fe(t),o=k(0),n=k(0),x=k(),H=L(()=>d.value.length>0),O=L(()=>d.value[o.value]||null),Q=()=>{o.value=o.value>0?o.value-1:d.value.length-1,n.value=O.value.contents.length-1},w=()=>{o.value=o.value<d.value.length-1?o.value+1:0,n.value=0},F=()=>{n.value<O.value.contents.length-1?n.value=n.value+1:w()},R=()=>{n.value>0?n.value=n.value-1:Q()},P=c=>c.map(i=>re(i)?i:e(i[0],i[1])),W=c=>{if(c.type==="custom"){const i=ce[c.index]||"$content",[g,D=""]=oe(i)?i[r.value].split("$content"):i.split("$content");return P([g,...c.display,D])}return P(c.display)},S=()=>{o.value=0,n.value=0,p("updateQuery",""),p("close")};return ae(()=>{X("keydown",c=>{if(H.value){if(c.key==="ArrowUp")R();else if(c.key==="ArrowDown")F();else if(c.key==="Enter"){const i=O.value.contents[n.value];s.path!==i.path&&(v(i),h.push(i.path),S())}}}),b(x.value,{reserveScrollBarGap:!0})}),se(()=>{E()}),()=>e("div",{class:["search-pro-result",{empty:t.value===""?u.value.length===0:!H.value}],ref:x},t.value===""?u.value.length?e("ul",{class:"search-pro-result-list"},e("li",{class:"search-pro-result-list-item"},[e("div",{class:"search-pro-result-title"},l.value.history),u.value.map((c,i)=>e(I,{to:c.path,class:["search-pro-result-item",{active:n.value===i}],onClick:()=>{console.log("click"),S()}},()=>[e(V,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[c.type==="content"&&c.header?e("div",{class:"content-header"},c.header):null,e("div",W(c))]),e("button",{class:"search-pro-close-icon",onClick:g=>{g.preventDefault(),g.stopPropagation(),y(i)}},e(A))]))])):l.value.emptyHistory:H.value?e("ul",{class:"search-pro-result-list"},d.value.map(({title:c,contents:i},g)=>{const D=o.value===g;return e("li",{class:["search-pro-result-list-item",{active:D}]},[e("div",{class:"search-pro-result-title"},c||"Documentation"),i.map((f,q)=>{const C=D&&n.value===q;return e(I,{to:f.path,class:["search-pro-result-item",{active:C,"aria-selected":C}],onClick:()=>{v(f),S()}},()=>[f.type==="content"?null:e(f.type==="title"?K:f.type==="heading"?J:N,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[f.type==="content"&&f.header?e("div",{class:"content-header"},f.header):null,e("div",W(f))])])})])})):l.value.emptyResult)}});export{ke as default};
