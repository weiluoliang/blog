import{a as M,b as U,k as E,c as Q,d as P,e as F,P as H,B as D,f as T}from"./app-0b1143fb.js";import{r as f,h as W,c as $,B as _,D as ee,F as te,o as ae,C as se,j as e,R as j,w as le,p as oe,i as ne}from"./framework-fdd96744.js";const ce="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";const A=()=>e(H,{name:"close"},()=>e("path",{d:"m925.468 822.294-303.27-310.288L925.51 201.674c34.683-27.842 38.3-75.802 8.122-107.217-30.135-31.37-82.733-34.259-117.408-6.463L512.001 399.257 207.777 87.993C173.1 60.197 120.504 63.087 90.369 94.456c-30.179 31.415-26.561 79.376 8.122 107.217L401.8 512.005l-303.27 310.29c-34.724 27.82-38.34 75.846-8.117 107.194 30.135 31.437 82.729 34.327 117.408 6.486L512 624.756l304.177 311.22c34.68 27.84 87.272 24.95 117.408-6.487 30.223-31.348 26.56-79.375-8.118-107.195z"}));A.displayName="CloseIcon";const X=()=>e(H,{name:"heading"},()=>e("path",{d:"M250.4 704.6H64V595.4h202.4l26.2-166.6H94V319.6h214.4L352 64h127.8l-43.6 255.4h211.2L691 64h126.2l-43.6 255.4H960v109.2H756.2l-24.6 166.6H930v109.2H717L672 960H545.8l43.6-255.4H376.6L333 960H206.8l43.6-255.4zm168.4-276L394 595.4h211.2l24.6-166.6h-211z"}));X.displayName="HeadingIcon";const b=()=>e(H,{name:"heart"},()=>e("path",{d:"M1024 358.156C1024 195.698 892.3 64 729.844 64c-86.362 0-164.03 37.218-217.844 96.49C458.186 101.218 380.518 64 294.156 64 131.698 64 0 195.698 0 358.156 0 444.518 37.218 522.186 96.49 576H96l320 320c32 32 64 64 96 64s64-32 96-64l320-320h-.49c59.272-53.814 96.49-131.482 96.49-217.844zM841.468 481.232 517.49 805.49a2981.962 2981.962 0 0 1-5.49 5.48c-1.96-1.95-3.814-3.802-5.49-5.48L182.532 481.234C147.366 449.306 128 405.596 128 358.156 128 266.538 202.538 192 294.156 192c47.44 0 91.15 19.366 123.076 54.532L512 350.912l94.768-104.378C638.696 211.366 682.404 192 729.844 192 821.462 192 896 266.538 896 358.156c0 47.44-19.368 91.15-54.532 123.076z"}));b.displayName="HeartIcon";const B=()=>e(H,{name:"history"},()=>e("path",{d:"M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512zm0-896a384 384 0 1 0 384 384 384 384 0 0 0-384-384zm192 448H512a64 64 0 0 1-64-64V320a64 64 0 0 1 128 0v128h128a64 64 0 0 1 0 128z"}));B.displayName="HistoryIcon";const I=()=>e(H,{name:"title"},()=>e("path",{d:"M512 256c70.656 0 134.656 28.672 180.992 75.008A254.933 254.933 0 0 1 768 512c0 83.968-41.024 157.888-103.488 204.48C688.96 748.736 704 788.48 704 832c0 105.984-86.016 192-192 192-106.048 0-192-86.016-192-192h128a64 64 0 1 0 128 0 64 64 0 0 0-64-64 255.19 255.19 0 0 1-181.056-75.008A255.403 255.403 0 0 1 256 512c0-83.968 41.024-157.824 103.488-204.544C335.04 275.264 320 235.584 320 192A192 192 0 0 1 512 0c105.984 0 192 85.952 192 192H576a64.021 64.021 0 0 0-128 0c0 35.328 28.672 64 64 64zM384 512c0 70.656 57.344 128 128 128s128-57.344 128-128-57.344-128-128-128-128 57.344-128 128z"}));I.displayName="TitleIcon";const re={0:"分类：$content",1:"标签：$content"},ue=300,x=5,ie={"/":{cancel:"Cancel",placeholder:"Search",search:"Search",select:"to select",navigate:"to navigate",exit:"to exit",history:"Search History",emptyHistory:"Empty Search History",emptyResult:"No results found",loading:"Loading search indexes..."}},pe="search-pro-history-results",C=M(pe,[]),he=()=>({history:C,addHistory:a=>{C.value.length<x?C.value=[a,...C.value]:C.value=[a,...C.value.slice(0,x-1)]},removeHistory:a=>{C.value=[...C.value.slice(0,a),...C.value.slice(a+1)]}}),de=f(ce),ve=W(()=>JSON.parse(D(de.value))),k=(a,p)=>{const h=a.toLowerCase(),s=p.toLowerCase(),n=[];let l=0,i=0;const d=(t,v=!1)=>{let o="";i===0?o=t.length>20?`… ${t.slice(-20)}`:t:v?o=t.length+i>100?`${t.slice(0,100-i)}… `:t:o=t.length>20?`${t.slice(0,20)} … ${t.slice(-20)}`:t,o&&n.push(o),i+=o.length,v||(n.push(["strong",p]),i+=p.length,i>=100&&n.push(" …"))};let y=h.indexOf(s,l);if(y===-1)return null;for(;y>=0;){const t=y+s.length;if(d(a.slice(l,y)),l=t,i>100)break;y=h.indexOf(s,l)}return i<100&&d(a.slice(l),!0),n},O=a=>a.reduce((p,{type:h})=>p+(h==="title"?50:h==="heading"?20:h==="custom"?10:1),0),ye=(a,p)=>{var h;const s={};for(const[n,l]of Object.entries(p)){const i=((h=p[n.replace(/\/[^\\]*$/,"")])==null?void 0:h.title)||"",d=`${i?`${i} > `:""}${l.title}`,y=k(l.title,a);y&&(s[d]=[...s[d]||[],{type:"title",path:n,display:y}]),l.customFields&&Object.entries(l.customFields).forEach(([t,v])=>{v.forEach(o=>{const c=k(o,a);c&&(s[d]=[...s[d]||[],{type:"custom",path:n,index:t,display:c}])})});for(const t of l.contents){const v=k(t.header,a);v&&(s[d]=[...s[d]||[],{type:"heading",path:n+(t.slug?`#${t.slug}`:""),display:v}]);for(const o of t.contents){const c=k(o,a);c&&(s[d]=[...s[d]||[],{type:"content",header:t.header,path:n+(t.slug?`#${t.slug}`:""),display:c}])}}}return Object.keys(s).sort((n,l)=>O(s[n])-O(s[l])).map(n=>({title:n,contents:s[n]}))},me=a=>{const p=U(),h=f([]),s=W(()=>ve.value[p.value]),n=T(l=>{h.value=l?ye(l,s.value):[]},ue);return le([a,p],()=>{n(a.value)}),h};var fe=$({name:"SearchResult",props:{query:{type:String,required:!0}},emits:{close:()=>!0,updateQuery:a=>!0},setup(a,{emit:p}){const h=_(),s=ee(),n=U(),l=E(ie),{history:i,addHistory:d,removeHistory:y}=he(),t=te(a,"query"),v=me(t),o=f(0),c=f(0),Z=f(),q=W(()=>v.value.length>0),z=W(()=>v.value[o.value]||null),J=()=>{o.value=o.value>0?o.value-1:v.value.length-1,c.value=z.value.contents.length-1},Y=()=>{o.value=o.value<v.value.length-1?o.value+1:0,c.value=0},N=()=>{c.value<z.value.contents.length-1?c.value=c.value+1:Y()},V=()=>{c.value>0?c.value=c.value-1:J()},L=r=>r.map(u=>ne(u)?u:e(u[0],u[1])),S=r=>{if(r.type==="custom"){const u=re[r.index]||"$content",[g,w=""]=oe(u)?u[n.value].split("$content"):u.split("$content");return L([g,...r.display,w])}return L(r.display)},R=()=>{o.value=0,c.value=0,p("updateQuery",""),p("close")};return ae(()=>{Q("keydown",r=>{if(q.value){if(r.key==="ArrowUp")V();else if(r.key==="ArrowDown")N();else if(r.key==="Enter"){const u=z.value.contents[c.value];s.path!==u.path&&(d(u),h.push(u.path),R())}}}),P(Z.value,{reserveScrollBarGap:!0})}),se(()=>{F()}),()=>e("div",{class:["search-pro-result",{empty:t.value===""?i.value.length===0:!q.value}],ref:Z},t.value===""?i.value.length?e("ul",{class:"search-pro-result-list"},e("li",{class:"search-pro-result-list-item"},[e("div",{class:"search-pro-result-title"},l.value.history),i.value.map((r,u)=>e(j,{to:r.path,class:["search-pro-result-item",{active:c.value===u}],onClick:()=>{console.log("click"),R()}},()=>[e(B,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[r.type==="content"&&r.header?e("div",{class:"content-header"},r.header):null,e("div",S(r))]),e("button",{class:"search-pro-close-icon",onClick:g=>{g.preventDefault(),g.stopPropagation(),y(u)}},e(A))]))])):l.value.emptyHistory:q.value?e("ul",{class:"search-pro-result-list"},v.value.map(({title:r,contents:u},g)=>{const w=o.value===g;return e("li",{class:["search-pro-result-list-item",{active:w}]},[e("div",{class:"search-pro-result-title"},r||"Documentation"),u.map((m,G)=>{const K=w&&c.value===G;return e(j,{to:m.path,class:["search-pro-result-item",{active:K,"aria-selected":K}],onClick:()=>{d(m),R()}},()=>[m.type==="content"?null:e(m.type==="title"?I:m.type==="heading"?X:b,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[m.type==="content"&&m.header?e("div",{class:"content-header"},m.header):null,e("div",S(m))])])})])})):l.value.emptyResult)}});export{fe as default};
