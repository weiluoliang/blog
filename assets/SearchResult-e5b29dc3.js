import{a as D,b as R,k as J,c as X,d as U,e as Y,P as C,B as T,f as V}from"./app-a72f9fe3.js";import{r as y,h as x,c as $,B as _,D as ee,F as te,o as ae,C as se,j as e,R as H,w as le,p as oe,i as ce}from"./framework-1fa35416.js";const ne="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";const B=()=>e(C,{name:"close"},()=>e("path",{d:"m925.468 822.294-303.27-310.288L925.51 201.674c34.683-27.842 38.3-75.802 8.122-107.217-30.135-31.37-82.733-34.259-117.408-6.463L512.001 399.257 207.777 87.993C173.1 60.197 120.504 63.087 90.369 94.456c-30.179 31.415-26.561 79.376 8.122 107.217L401.8 512.005l-303.27 310.29c-34.724 27.82-38.34 75.846-8.117 107.194 30.135 31.437 82.729 34.327 117.408 6.486L512 624.756l304.177 311.22c34.68 27.84 87.272 24.95 117.408-6.487 30.223-31.348 26.56-79.375-8.118-107.195z"}));B.displayName="CloseIcon";const I=()=>e(C,{name:"heading"},()=>e("path",{d:"M250.4 704.6H64V595.4h202.4l26.2-166.6H94V319.6h214.4L352 64h127.8l-43.6 255.4h211.2L691 64h126.2l-43.6 255.4H960v109.2H756.2l-24.6 166.6H930v109.2H717L672 960H545.8l43.6-255.4H376.6L333 960H206.8l43.6-255.4zm168.4-276L394 595.4h211.2l24.6-166.6h-211z"}));I.displayName="HeadingIcon";const W=()=>e(C,{name:"heart"},()=>e("path",{d:"M1024 358.156C1024 195.698 892.3 64 729.844 64c-86.362 0-164.03 37.218-217.844 96.49C458.186 101.218 380.518 64 294.156 64 131.698 64 0 195.698 0 358.156 0 444.518 37.218 522.186 96.49 576H96l320 320c32 32 64 64 96 64s64-32 96-64l320-320h-.49c59.272-53.814 96.49-131.482 96.49-217.844zM841.468 481.232 517.49 805.49a2981.962 2981.962 0 0 1-5.49 5.48c-1.96-1.95-3.814-3.802-5.49-5.48L182.532 481.234C147.366 449.306 128 405.596 128 358.156 128 266.538 202.538 192 294.156 192c47.44 0 91.15 19.366 123.076 54.532L512 350.912l94.768-104.378C638.696 211.366 682.404 192 729.844 192 821.462 192 896 266.538 896 358.156c0 47.44-19.368 91.15-54.532 123.076z"}));W.displayName="HeartIcon";const Z=()=>e(C,{name:"history"},()=>e("path",{d:"M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512zm0-896a384 384 0 1 0 384 384 384 384 0 0 0-384-384zm192 448H512a64 64 0 0 1-64-64V320a64 64 0 0 1 128 0v128h128a64 64 0 0 1 0 128z"}));Z.displayName="HistoryIcon";const A=()=>e(C,{name:"title"},()=>e("path",{d:"M512 256c70.656 0 134.656 28.672 180.992 75.008A254.933 254.933 0 0 1 768 512c0 83.968-41.024 157.888-103.488 204.48C688.96 748.736 704 788.48 704 832c0 105.984-86.016 192-192 192-106.048 0-192-86.016-192-192h128a64 64 0 1 0 128 0 64 64 0 0 0-64-64 255.19 255.19 0 0 1-181.056-75.008A255.403 255.403 0 0 1 256 512c0-83.968 41.024-157.824 103.488-204.544C335.04 275.264 320 235.584 320 192A192 192 0 0 1 512 0c105.984 0 192 85.952 192 192H576a64.021 64.021 0 0 0-128 0c0 35.328 28.672 64 64 64zM384 512c0 70.656 57.344 128 128 128s128-57.344 128-128-57.344-128-128-128-128 57.344-128 128z"}));A.displayName="TitleIcon";const re={0:"分类：$content",1:"标签：$content"},ie=300,K=5,ue={"/":{cancel:"Cancel",placeholder:"Search",search:"Search",select:"to select",navigate:"to navigate",exit:"to exit",history:"Search History",emptyHistory:"Empty Search History",emptyResult:"No results found",loading:"Loading search indexes..."}},ve="search-pro-history-results",q=D(ve,[]),he=()=>({history:q,addHistory:a=>{q.value.length<K?q.value=[a,...q.value]:q.value=[a,...q.value.slice(0,K-1)]},removeHistory:a=>{q.value=[...q.value.slice(0,a),...q.value.slice(a+1)]}}),pe=y(ne),de=x(()=>JSON.parse(T(pe.value))),S=(a,v)=>{const h=a.toLowerCase(),s=v.toLowerCase(),c=[];let l=0,u=0;const p=(t,d=!1)=>{let o="";u===0?o=t.length>20?`… ${t.slice(-20)}`:t:d?o=t.length+u>100?`${t.slice(0,100-u)}… `:t:o=t.length>20?`${t.slice(0,20)} … ${t.slice(-20)}`:t,o&&c.push(o),u+=o.length,d||(c.push(["strong",v]),u+=v.length,u>=100&&c.push(" …"))};let m=h.indexOf(s,l);if(m===-1)return null;for(;m>=0;){const t=m+s.length;if(p(a.slice(l,m)),l=t,u>100)break;m=h.indexOf(s,l)}return u<100&&p(a.slice(l),!0),c},P=a=>a.reduce((v,{type:h})=>v+(h==="title"?50:h==="heading"?20:h==="custom"?10:1),0),me=(a,v)=>{var h;const s={};for(const[c,l]of Object.entries(v)){const u=((h=v[c.replace(/\/[^\\]*$/,"")])==null?void 0:h.title)||"",p=`${u?`${u} > `:""}${l.title}`,m=S(l.title,a);m&&(s[p]=[...s[p]||[],{type:"title",path:c,display:m}]),l.customFields&&Object.entries(l.customFields).forEach(([t,d])=>{d.forEach(o=>{const n=S(o,a);n&&(s[p]=[...s[p]||[],{type:"custom",path:c,index:t,display:n}])})});for(const t of l.contents){const d=S(t.header,a);d&&(s[p]=[...s[p]||[],{type:"heading",path:c+(t.slug?`#${t.slug}`:""),display:d}]);for(const o of t.contents){const n=S(o,a);n&&(s[p]=[...s[p]||[],{type:"content",header:t.header,path:c+(t.slug?`#${t.slug}`:""),display:n}])}}}return Object.keys(s).sort((c,l)=>P(s[c])-P(s[l])).map(c=>({title:c,contents:s[c]}))},fe=a=>{const v=R(),h=y([]),s=x(()=>de.value[v.value]),c=V(l=>{h.value=l?me(l,s.value):[]},ie);return le([a,v],()=>{c(a.value)}),h};var ye=$({name:"SearchResult",props:{query:{type:String,required:!0}},emits:{close:()=>!0,updateQuery:a=>!0},setup(a,{emit:v}){const h=_(),s=ee(),c=R(),l=J(ue),{history:u,addHistory:p,removeHistory:m}=he(),t=te(a,"query"),d=fe(t),o=y(0),n=y(0),k=y(),M=x(()=>d.value.length>0),j=x(()=>d.value[o.value]||null),E=()=>{o.value=o.value>0?o.value-1:d.value.length-1,n.value=j.value.contents.length-1},N=()=>{o.value=o.value<d.value.length-1?o.value+1:0,n.value=0},Q=()=>{n.value<j.value.contents.length-1?n.value=n.value+1:N()},O=()=>{n.value>0?n.value=n.value-1:E()},G=r=>r.map(i=>ce(i)?i:e(i[0],i[1])),F=r=>{if(r.type==="custom"){const i=re[r.index]||"$content",[g,b=""]=oe(i)?i[c.value].split("$content"):i.split("$content");return G([g,...r.display,b])}return G(r.display)},z=()=>{o.value=0,n.value=0,v("updateQuery",""),v("close")};return ae(()=>{X("keydown",r=>{if(M.value){if(r.key==="ArrowUp")O();else if(r.key==="ArrowDown")Q();else if(r.key==="Enter"){const i=j.value.contents[n.value];s.path!==i.path&&(p(i),h.push(i.path),z())}}}),U(k.value,{reserveScrollBarGap:!0})}),se(()=>{Y()}),()=>e("div",{class:["search-pro-result",{empty:t.value===""?u.value.length===0:!M.value}],ref:k},t.value===""?u.value.length?e("ul",{class:"search-pro-result-list"},e("li",{class:"search-pro-result-list-item"},[e("div",{class:"search-pro-result-title"},l.value.history),u.value.map((r,i)=>e(H,{to:r.path,class:["search-pro-result-item",{active:n.value===i}],onClick:()=>{console.log("click"),z()}},()=>[e(Z,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[r.type==="content"&&r.header?e("div",{class:"content-header"},r.header):null,e("div",F(r))]),e("button",{class:"search-pro-close-icon",onClick:g=>{g.preventDefault(),g.stopPropagation(),m(i)}},e(B))]))])):l.value.emptyHistory:M.value?e("ul",{class:"search-pro-result-list"},d.value.map(({title:r,contents:i},g)=>{const b=o.value===g;return e("li",{class:["search-pro-result-list-item",{active:b}]},[e("div",{class:"search-pro-result-title"},r||"Documentation"),i.map((f,w)=>{const L=b&&n.value===w;return e(H,{to:f.path,class:["search-pro-result-item",{active:L,"aria-selected":L}],onClick:()=>{p(f),z()}},()=>[f.type==="content"?null:e(f.type==="title"?A:f.type==="heading"?I:W,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[f.type==="content"&&f.header?e("div",{class:"content-header"},f.header):null,e("div",F(f))])])})])})):l.value.emptyResult)}});export{ye as default};
