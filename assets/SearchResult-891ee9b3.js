import{a as F,b as C,k as N,c as O,d as T,e as Q,P as L,B as X,f as Z}from"./app-213dd073.js";import{r as H,h as K,c as $,B as _,D as ee,F as te,o as se,C as ae,j as e,R as W,w as le,p as oe,i as ne}from"./framework-fdd96744.js";const re="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";const S=()=>e(L,{name:"close"},()=>e("path",{d:"m925.468 822.294-303.27-310.288L925.51 201.674c34.683-27.842 38.3-75.802 8.122-107.217-30.135-31.37-82.733-34.259-117.408-6.463L512.001 399.257 207.777 87.993C173.1 60.197 120.504 63.087 90.369 94.456c-30.179 31.415-26.561 79.376 8.122 107.217L401.8 512.005l-303.27 310.29c-34.724 27.82-38.34 75.846-8.117 107.194 30.135 31.437 82.729 34.327 117.408 6.486L512 624.756l304.177 311.22c34.68 27.84 87.272 24.95 117.408-6.487 30.223-31.348 26.56-79.375-8.118-107.195z"}));S.displayName="CloseIcon";const U=()=>e(L,{name:"heading"},()=>e("path",{d:"M250.4 704.6H64V595.4h202.4l26.2-166.6H94V319.6h214.4L352 64h127.8l-43.6 255.4h211.2L691 64h126.2l-43.6 255.4H960v109.2H756.2l-24.6 166.6H930v109.2H717L672 960H545.8l43.6-255.4H376.6L333 960H206.8l43.6-255.4zm168.4-276L394 595.4h211.2l24.6-166.6h-211z"}));U.displayName="HeadingIcon";const b=()=>e(L,{name:"heart"},()=>e("path",{d:"M1024 358.156C1024 195.698 892.3 64 729.844 64c-86.362 0-164.03 37.218-217.844 96.49C458.186 101.218 380.518 64 294.156 64 131.698 64 0 195.698 0 358.156 0 444.518 37.218 522.186 96.49 576H96l320 320c32 32 64 64 96 64s64-32 96-64l320-320h-.49c59.272-53.814 96.49-131.482 96.49-217.844zM841.468 481.232 517.49 805.49a2981.962 2981.962 0 0 1-5.49 5.48c-1.96-1.95-3.814-3.802-5.49-5.48L182.532 481.234C147.366 449.306 128 405.596 128 358.156 128 266.538 202.538 192 294.156 192c47.44 0 91.15 19.366 123.076 54.532L512 350.912l94.768-104.378C638.696 211.366 682.404 192 729.844 192 821.462 192 896 266.538 896 358.156c0 47.44-19.368 91.15-54.532 123.076z"}));b.displayName="HeartIcon";const P=()=>e(L,{name:"history"},()=>e("path",{d:"M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512zm0-896a384 384 0 1 0 384 384 384 384 0 0 0-384-384zm192 448H512a64 64 0 0 1-64-64V320a64 64 0 0 1 128 0v128h128a64 64 0 0 1 0 128z"}));P.displayName="HistoryIcon";const A=()=>e(L,{name:"title"},()=>e("path",{d:"M512 256c70.656 0 134.656 28.672 180.992 75.008A254.933 254.933 0 0 1 768 512c0 83.968-41.024 157.888-103.488 204.48C688.96 748.736 704 788.48 704 832c0 105.984-86.016 192-192 192-106.048 0-192-86.016-192-192h128a64 64 0 1 0 128 0 64 64 0 0 0-64-64 255.19 255.19 0 0 1-181.056-75.008A255.403 255.403 0 0 1 256 512c0-83.968 41.024-157.824 103.488-204.544C335.04 275.264 320 235.584 320 192A192 192 0 0 1 512 0c105.984 0 192 85.952 192 192H576a64.021 64.021 0 0 0-128 0c0 35.328 28.672 64 64 64zM384 512c0 70.656 57.344 128 128 128s128-57.344 128-128-57.344-128-128-128-128 57.344-128 128z"}));A.displayName="TitleIcon";const ce={0:"分类：$content",1:"标签：$content"},ie=300,x=5,ue={"/":{cancel:"Cancel",placeholder:"Search",search:"Search",select:"to select",navigate:"to navigate",exit:"to exit",history:"Search History",emptyHistory:"Empty Search History",emptyResult:"No results found",loading:"Loading search indexes..."}},pe="search-pro-history-results",g=F(pe,[]),he=()=>({history:g,addHistory:s=>{g.value.length<x?g.value=[s,...g.value]:g.value=[s,...g.value.slice(0,x-1)]},removeHistory:s=>{g.value=[...g.value.slice(0,s),...g.value.slice(s+1)]}}),ve=H(re),de=K(()=>JSON.parse(X(ve.value))),R=(s,p)=>{const h=s.toLowerCase(),a=p.toLowerCase(),n=[];let l=0,u=0;const v=(t,d=!1)=>{let o="";u===0?o=t.length>20?`… ${t.slice(-20)}`:t:d?o=t.length+u>100?`${t.slice(0,100-u)}… `:t:o=t.length>20?`${t.slice(0,20)} … ${t.slice(-20)}`:t,o&&n.push(o),u+=o.length,d||(n.push(["strong",p]),u+=p.length,u>=100&&n.push(" …"))};let y=h.indexOf(a,l);if(y===-1)return null;for(;y>=0;){const t=y+a.length;if(v(s.slice(l,y)),l=t,u>100)break;y=h.indexOf(a,l)}return u<100&&v(s.slice(l),!0),n},B=s=>s.reduce((p,{type:h})=>p+(h==="title"?50:h==="heading"?20:h==="custom"?10:1),0),ye=(s,p)=>{var h;const a={};for(const[n,l]of Object.entries(p)){const u=((h=p[n.replace(/\/[^\\]*$/,"")])==null?void 0:h.title)||"",v=`${u?`${u} > `:""}${l.title}`,y=R(l.title,s);y&&(a[v]=[...a[v]||[],{type:"title",path:n,display:y}]),l.customFields&&Object.entries(l.customFields).forEach(([t,d])=>{d.forEach(o=>{const r=R(o,s);r&&(a[v]=[...a[v]||[],{type:"custom",path:n,index:t,display:r}])})});for(const t of l.contents){const d=R(t.header,s);d&&(a[v]=[...a[v]||[],{type:"heading",path:n+(t.slug?`#${t.slug}`:""),display:d}]);for(const o of t.contents){const r=R(o,s);r&&(a[v]=[...a[v]||[],{type:"content",header:t.header,path:n+(t.slug?`#${t.slug}`:""),display:r}])}}}return Object.keys(a).sort((n,l)=>B(a[n])-B(a[l])).map(n=>({title:n,contents:a[n]}))},me=s=>{const p=C(),h=H([]),a=K(()=>de.value[p.value]),n=Z(l=>{h.value=l?ye(l,a.value):[]},ie);return le([s,p],()=>{n(s.value)}),h};var He=$({name:"SearchResult",props:{query:{type:String,required:!0}},emits:{close:()=>!0,updateQuery:s=>!0},setup(s,{emit:p}){const h=_(),a=ee(),n=C(),l=N(ue),{history:u,addHistory:v,removeHistory:y}=he(),t=te(s,"query"),d=me(t),o=H(0),r=H(0),q=H(),w=K(()=>d.value.length>0),z=K(()=>d.value[o.value]||null),J=()=>{o.value=o.value>0?o.value-1:d.value.length-1,r.value=z.value.contents.length-1},D=()=>{o.value=o.value<d.value.length-1?o.value+1:0,r.value=0},j=()=>{r.value<z.value.contents.length-1?r.value=r.value+1:D()},G=()=>{r.value>0?r.value=r.value-1:J()},I=c=>c.map(i=>ne(i)?i:e(i[0],i[1])),V=c=>{if(c.type==="custom"){const i=ce[c.index]||"$content",[f,E=""]=oe(i)?i[n.value].split("$content"):i.split("$content");return I([f,...c.display,E])}return I(c.display)},k=()=>{o.value=0,r.value=0,p("updateQuery",""),p("close")};return se(()=>{O("keydown",c=>{if(w.value){if(c.key==="ArrowUp")G();else if(c.key==="ArrowDown")j();else if(c.key==="Enter"){const i=z.value.contents[r.value];a.path!==i.path&&(v(i),h.push(i.path),k())}}}),T(q.value,{reserveScrollBarGap:!0})}),ae(()=>{Q()}),()=>e("div",{class:["search-pro-result",{empty:t.value===""?u.value.length===0:!w.value}],ref:q},t.value===""?u.value.length?e("ul",{class:"search-pro-result-list"},e("li",{class:"search-pro-result-list-item"},[e("div",{class:"search-pro-result-title"},l.value.history),u.value.map((c,i)=>e(W,{to:c.path,class:["search-pro-result-item",{active:r.value===i}],onClick:()=>{console.log("click"),k()}},()=>[e(P,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[c.type==="content"&&c.header?e("div",{class:"content-header"},c.header):null,e("div",V(c))]),e("button",{class:"search-pro-close-icon",onClick:f=>{f.preventDefault(),f.stopPropagation(),y(i)}},e(S))]))])):l.value.emptyHistory:w.value?e("ul",{class:"search-pro-result-list"},d.value.map(({title:c,contents:i},f)=>{const E=o.value===f;return e("li",{class:["search-pro-result-list-item",{active:E}]},[e("div",{class:"search-pro-result-title"},c||"Documentation"),i.map((m,Y)=>{const M=E&&r.value===Y;return e(W,{to:m.path,class:["search-pro-result-item",{active:M,"aria-selected":M}],onClick:()=>{v(m),k()}},()=>[m.type==="content"?null:e(m.type==="title"?A:m.type==="heading"?U:b,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[m.type==="content"&&m.header?e("div",{class:"content-header"},m.header):null,e("div",V(m))])])})])})):l.value.emptyResult)}});export{He as default};
