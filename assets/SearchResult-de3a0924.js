import{a as X,b as B,k as Y,c as j,d as G,e as A,P as S,B as M,f as Q}from"./app-df3b0614.js";import{r as g,h as w,c as $,B as _,D as ee,F as te,o as se,C as ae,j as e,R as b,w as le,p as ce,i as ne}from"./framework-c51ec70f.js";const oe="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";const C=()=>e(S,{name:"close"},()=>e("path",{d:"m925.468 822.294-303.27-310.288L925.51 201.674c34.683-27.842 38.3-75.802 8.122-107.217-30.135-31.37-82.733-34.259-117.408-6.463L512.001 399.257 207.777 87.993C173.1 60.197 120.504 63.087 90.369 94.456c-30.179 31.415-26.561 79.376 8.122 107.217L401.8 512.005l-303.27 310.29c-34.724 27.82-38.34 75.846-8.117 107.194 30.135 31.437 82.729 34.327 117.408 6.486L512 624.756l304.177 311.22c34.68 27.84 87.272 24.95 117.408-6.487 30.223-31.348 26.56-79.375-8.118-107.195z"}));C.displayName="CloseIcon";const N=()=>e(S,{name:"heading"},()=>e("path",{d:"M250.4 704.6H64V595.4h202.4l26.2-166.6H94V319.6h214.4L352 64h127.8l-43.6 255.4h211.2L691 64h126.2l-43.6 255.4H960v109.2H756.2l-24.6 166.6H930v109.2H717L672 960H545.8l43.6-255.4H376.6L333 960H206.8l43.6-255.4zm168.4-276L394 595.4h211.2l24.6-166.6h-211z"}));N.displayName="HeadingIcon";const Z=()=>e(S,{name:"heart"},()=>e("path",{d:"M1024 358.156C1024 195.698 892.3 64 729.844 64c-86.362 0-164.03 37.218-217.844 96.49C458.186 101.218 380.518 64 294.156 64 131.698 64 0 195.698 0 358.156 0 444.518 37.218 522.186 96.49 576H96l320 320c32 32 64 64 96 64s64-32 96-64l320-320h-.49c59.272-53.814 96.49-131.482 96.49-217.844zM841.468 481.232 517.49 805.49a2981.962 2981.962 0 0 1-5.49 5.48c-1.96-1.95-3.814-3.802-5.49-5.48L182.532 481.234C147.366 449.306 128 405.596 128 358.156 128 266.538 202.538 192 294.156 192c47.44 0 91.15 19.366 123.076 54.532L512 350.912l94.768-104.378C638.696 211.366 682.404 192 729.844 192 821.462 192 896 266.538 896 358.156c0 47.44-19.368 91.15-54.532 123.076z"}));Z.displayName="HeartIcon";const R=()=>e(S,{name:"history"},()=>e("path",{d:"M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512zm0-896a384 384 0 1 0 384 384 384 384 0 0 0-384-384zm192 448H512a64 64 0 0 1-64-64V320a64 64 0 0 1 128 0v128h128a64 64 0 0 1 0 128z"}));R.displayName="HistoryIcon";const P=()=>e(S,{name:"title"},()=>e("path",{d:"M512 256c70.656 0 134.656 28.672 180.992 75.008A254.933 254.933 0 0 1 768 512c0 83.968-41.024 157.888-103.488 204.48C688.96 748.736 704 788.48 704 832c0 105.984-86.016 192-192 192-106.048 0-192-86.016-192-192h128a64 64 0 1 0 128 0 64 64 0 0 0-64-64 255.19 255.19 0 0 1-181.056-75.008A255.403 255.403 0 0 1 256 512c0-83.968 41.024-157.824 103.488-204.544C335.04 275.264 320 235.584 320 192A192 192 0 0 1 512 0c105.984 0 192 85.952 192 192H576a64.021 64.021 0 0 0-128 0c0 35.328 28.672 64 64 64zM384 512c0 70.656 57.344 128 128 128s128-57.344 128-128-57.344-128-128-128-128 57.344-128 128z"}));P.displayName="TitleIcon";const re={0:"分类：$content",1:"标签：$content"},ie=300,T=5,ue={"/":{cancel:"Cancel",placeholder:"Search",search:"Search",select:"to select",navigate:"to navigate",exit:"to exit",history:"Search History",emptyHistory:"Empty Search History",emptyResult:"No results found",loading:"Loading search indexes..."}},he="search-pro-history-results",f=X(he,[]),pe=()=>({history:f,addHistory:s=>{f.value.length<T?f.value=[s,...f.value]:f.value=[s,...f.value.slice(0,T-1)]},removeHistory:s=>{f.value=[...f.value.slice(0,s),...f.value.slice(s+1)]}}),ve=g(oe),de=w(()=>JSON.parse(M(ve.value))),H=(s,h)=>{const p=s.toLowerCase(),a=h.toLowerCase(),n=[];let l=0,u=0;const v=(t,d=!1)=>{let c="";u===0?c=t.length>20?`… ${t.slice(-20)}`:t:d?c=t.length+u>100?`${t.slice(0,100-u)}… `:t:c=t.length>20?`${t.slice(0,20)} … ${t.slice(-20)}`:t,c&&n.push(c),u+=c.length,d||(n.push(["strong",h]),u+=h.length,u>=100&&n.push(" …"))};let y=p.indexOf(a,l);if(y===-1)return null;for(;y>=0;){const t=y+a.length;if(v(s.slice(l,y)),l=t,u>100)break;y=p.indexOf(a,l)}return u<100&&v(s.slice(l),!0),n},U=s=>s.reduce((h,{type:p})=>h+(p==="title"?50:p==="heading"?20:p==="custom"?10:1),0),ye=(s,h)=>{var p;const a={};for(const[n,l]of Object.entries(h)){const u=((p=h[n.replace(/\/[^\\]*$/,"")])==null?void 0:p.title)||"",v=`${u?`${u} > `:""}${l.title}`,y=H(l.title,s);y&&(a[v]=[...a[v]||[],{type:"title",path:n,display:y}]),l.customFields&&Object.entries(l.customFields).forEach(([t,d])=>{d.forEach(c=>{const o=H(c,s);o&&(a[v]=[...a[v]||[],{type:"custom",path:n,index:t,display:o}])})});for(const t of l.contents){const d=H(t.header,s);d&&(a[v]=[...a[v]||[],{type:"heading",path:n+(t.slug?`#${t.slug}`:""),display:d}]);for(const c of t.contents){const o=H(c,s);o&&(a[v]=[...a[v]||[],{type:"content",header:t.header,path:n+(t.slug?`#${t.slug}`:""),display:o}])}}}return Object.keys(a).sort((n,l)=>U(a[n])-U(a[l])).map(n=>({title:n,contents:a[n]}))},ze=s=>{const h=B(),p=g([]),a=w(()=>de.value[h.value]),n=Q(l=>{p.value=l?ye(l,a.value):[]},ie);return le([s,h],()=>{n(s.value)}),p};var ge=$({name:"SearchResult",props:{query:{type:String,required:!0}},emits:{close:()=>!0,updateQuery:s=>!0},setup(s,{emit:h}){const p=_(),a=ee(),n=B(),l=Y(ue),{history:u,addHistory:v,removeHistory:y}=pe(),t=te(s,"query"),d=ze(t),c=g(0),o=g(0),I=g(),L=w(()=>d.value.length>0),k=w(()=>d.value[c.value]||null),x=()=>{c.value=c.value>0?c.value-1:d.value.length-1,o.value=k.value.contents.length-1},E=()=>{c.value=c.value<d.value.length-1?c.value+1:0,o.value=0},K=()=>{o.value<k.value.contents.length-1?o.value=o.value+1:E()},O=()=>{o.value>0?o.value=o.value-1:x()},D=r=>r.map(i=>ne(i)?i:e(i[0],i[1])),J=r=>{if(r.type==="custom"){const i=re[r.index]||"$content",[m,q=""]=ce(i)?i[n.value].split("$content"):i.split("$content");return D([m,...r.display,q])}return D(r.display)},F=()=>{c.value=0,o.value=0,h("updateQuery",""),h("close")};return se(()=>{j("keydown",r=>{if(L.value){if(r.key==="ArrowUp")O();else if(r.key==="ArrowDown")K();else if(r.key==="Enter"){const i=k.value.contents[o.value];a.path!==i.path&&(v(i),p.push(i.path),F())}}}),G(I.value,{reserveScrollBarGap:!0})}),ae(()=>{A()}),()=>e("div",{class:["search-pro-result",{empty:t.value===""?u.value.length===0:!L.value}],ref:I},t.value===""?u.value.length?e("ul",{class:"search-pro-result-list"},e("li",{class:"search-pro-result-list-item"},[e("div",{class:"search-pro-result-title"},l.value.history),u.value.map((r,i)=>e(b,{to:r.path,class:["search-pro-result-item",{active:o.value===i}],onClick:()=>{console.log("click"),F()}},()=>[e(R,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[r.type==="content"&&r.header?e("div",{class:"content-header"},r.header):null,e("div",J(r))]),e("button",{class:"search-pro-close-icon",onClick:m=>{m.preventDefault(),m.stopPropagation(),y(i)}},e(C))]))])):l.value.emptyHistory:L.value?e("ul",{class:"search-pro-result-list"},d.value.map(({title:r,contents:i},m)=>{const q=c.value===m;return e("li",{class:["search-pro-result-list-item",{active:q}]},[e("div",{class:"search-pro-result-title"},r||"Documentation"),i.map((z,W)=>{const V=q&&o.value===W;return e(b,{to:z.path,class:["search-pro-result-item",{active:V,"aria-selected":V}],onClick:()=>{v(z),F()}},()=>[z.type==="content"?null:e(z.type==="title"?P:z.type==="heading"?N:Z,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[z.type==="content"&&z.header?e("div",{class:"content-header"},z.header):null,e("div",J(z))])])})])})):l.value.emptyResult)}});export{ge as default};
