import{a as K,b as J,k as U,c as q,d as w,e as V,P as S,B as Z,f as B}from"./app-805911c7.js";import{r as f,h as j,c as $,B as _,D as ee,F as te,o as le,C as ae,j as e,R as Y,w as se,p as ne,i as oe}from"./framework-fdd96744.js";const ce="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";const M=()=>e(S,{name:"close"},()=>e("path",{d:"m925.468 822.294-303.27-310.288L925.51 201.674c34.683-27.842 38.3-75.802 8.122-107.217-30.135-31.37-82.733-34.259-117.408-6.463L512.001 399.257 207.777 87.993C173.1 60.197 120.504 63.087 90.369 94.456c-30.179 31.415-26.561 79.376 8.122 107.217L401.8 512.005l-303.27 310.29c-34.724 27.82-38.34 75.846-8.117 107.194 30.135 31.437 82.729 34.327 117.408 6.486L512 624.756l304.177 311.22c34.68 27.84 87.272 24.95 117.408-6.487 30.223-31.348 26.56-79.375-8.118-107.195z"}));M.displayName="CloseIcon";const A=()=>e(S,{name:"heading"},()=>e("path",{d:"M250.4 704.6H64V595.4h202.4l26.2-166.6H94V319.6h214.4L352 64h127.8l-43.6 255.4h211.2L691 64h126.2l-43.6 255.4H960v109.2H756.2l-24.6 166.6H930v109.2H717L672 960H545.8l43.6-255.4H376.6L333 960H206.8l43.6-255.4zm168.4-276L394 595.4h211.2l24.6-166.6h-211z"}));A.displayName="HeadingIcon";const x=()=>e(S,{name:"heart"},()=>e("path",{d:"M1024 358.156C1024 195.698 892.3 64 729.844 64c-86.362 0-164.03 37.218-217.844 96.49C458.186 101.218 380.518 64 294.156 64 131.698 64 0 195.698 0 358.156 0 444.518 37.218 522.186 96.49 576H96l320 320c32 32 64 64 96 64s64-32 96-64l320-320h-.49c59.272-53.814 96.49-131.482 96.49-217.844zM841.468 481.232 517.49 805.49a2981.962 2981.962 0 0 1-5.49 5.48c-1.96-1.95-3.814-3.802-5.49-5.48L182.532 481.234C147.366 449.306 128 405.596 128 358.156 128 266.538 202.538 192 294.156 192c47.44 0 91.15 19.366 123.076 54.532L512 350.912l94.768-104.378C638.696 211.366 682.404 192 729.844 192 821.462 192 896 266.538 896 358.156c0 47.44-19.368 91.15-54.532 123.076z"}));x.displayName="HeartIcon";const G=()=>e(S,{name:"history"},()=>e("path",{d:"M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512zm0-896a384 384 0 1 0 384 384 384 384 0 0 0-384-384zm192 448H512a64 64 0 0 1-64-64V320a64 64 0 0 1 128 0v128h128a64 64 0 0 1 0 128z"}));G.displayName="HistoryIcon";const O=()=>e(S,{name:"title"},()=>e("path",{d:"M512 256c70.656 0 134.656 28.672 180.992 75.008A254.933 254.933 0 0 1 768 512c0 83.968-41.024 157.888-103.488 204.48C688.96 748.736 704 788.48 704 832c0 105.984-86.016 192-192 192-106.048 0-192-86.016-192-192h128a64 64 0 1 0 128 0 64 64 0 0 0-64-64 255.19 255.19 0 0 1-181.056-75.008A255.403 255.403 0 0 1 256 512c0-83.968 41.024-157.824 103.488-204.544C335.04 275.264 320 235.584 320 192A192 192 0 0 1 512 0c105.984 0 192 85.952 192 192H576a64.021 64.021 0 0 0-128 0c0 35.328 28.672 64 64 64zM384 512c0 70.656 57.344 128 128 128s128-57.344 128-128-57.344-128-128-128-128 57.344-128 128z"}));O.displayName="TitleIcon";const re={0:"分类：$content",1:"标签：$content"},ie=300,C=5,ue={"/":{cancel:"Cancel",placeholder:"Search",search:"Search",select:"to select",navigate:"to navigate",exit:"to exit",history:"Search History",emptyHistory:"Empty Search History",emptyResult:"No results found",loading:"Loading search indexes..."}},he="search-pro-history-results",L=K(he,[]),pe=()=>({history:L,addHistory:l=>{L.value.length<C?L.value=[l,...L.value]:L.value=[l,...L.value.slice(0,C-1)]},removeHistory:l=>{L.value=[...L.value.slice(0,l),...L.value.slice(l+1)]}}),ve=f(ce),de=j(()=>JSON.parse(Z(ve.value))),Q=(l,h)=>{const p=l.toLowerCase(),a=h.toLowerCase(),o=[];let s=0,u=0;const v=(t,d=!1)=>{let n="";u===0?n=t.length>20?`… ${t.slice(-20)}`:t:d?n=t.length+u>100?`${t.slice(0,100-u)}… `:t:n=t.length>20?`${t.slice(0,20)} … ${t.slice(-20)}`:t,n&&o.push(n),u+=n.length,d||(o.push(["strong",h]),u+=h.length,u>=100&&o.push(" …"))};let m=p.indexOf(a,s);if(m===-1)return null;for(;m>=0;){const t=m+a.length;if(v(l.slice(s,m)),s=t,u>100)break;m=p.indexOf(a,s)}return u<100&&v(l.slice(s),!0),o},N=l=>l.reduce((h,{type:p})=>h+(p==="title"?50:p==="heading"?20:p==="custom"?10:1),0),me=(l,h)=>{var p;const a={};for(const[o,s]of Object.entries(h)){const u=((p=h[o.replace(/\/[^\\]*$/,"")])==null?void 0:p.title)||"",v=`${u?`${u} > `:""}${s.title}`,m=Q(s.title,l);m&&(a[v]=[...a[v]||[],{type:"title",path:o,display:m}]),s.customFields&&Object.entries(s.customFields).forEach(([t,d])=>{d.forEach(n=>{const c=Q(n,l);c&&(a[v]=[...a[v]||[],{type:"custom",path:o,index:t,display:c}])})});for(const t of s.contents){const d=Q(t.header,l);d&&(a[v]=[...a[v]||[],{type:"heading",path:o+(t.slug?`#${t.slug}`:""),display:d}]);for(const n of t.contents){const c=Q(n,l);c&&(a[v]=[...a[v]||[],{type:"content",header:t.header,path:o+(t.slug?`#${t.slug}`:""),display:c}])}}}return Object.keys(a).sort((o,s)=>N(a[o])-N(a[s])).map(o=>({title:o,contents:a[o]}))},ye=l=>{const h=J(),p=f([]),a=j(()=>de.value[h.value]),o=B(s=>{p.value=s?me(s,a.value):[]},ie);return se([l,h],()=>{o(l.value)}),p};var fe=$({name:"SearchResult",props:{query:{type:String,required:!0}},emits:{close:()=>!0,updateQuery:l=>!0},setup(l,{emit:h}){const p=_(),a=ee(),o=J(),s=U(ue),{history:u,addHistory:v,removeHistory:m}=pe(),t=te(l,"query"),d=ye(t),n=f(0),c=f(0),b=f(),T=j(()=>d.value.length>0),k=j(()=>d.value[n.value]||null),z=()=>{n.value=n.value>0?n.value-1:d.value.length-1,c.value=k.value.contents.length-1},W=()=>{n.value=n.value<d.value.length-1?n.value+1:0,c.value=0},D=()=>{c.value<k.value.contents.length-1?c.value=c.value+1:W()},E=()=>{c.value>0?c.value=c.value-1:z()},F=r=>r.map(i=>oe(i)?i:e(i[0],i[1])),X=r=>{if(r.type==="custom"){const i=re[r.index]||"$content",[g,H=""]=ne(i)?i[o.value].split("$content"):i.split("$content");return F([g,...r.display,H])}return F(r.display)},P=()=>{n.value=0,c.value=0,h("updateQuery",""),h("close")};return le(()=>{q("keydown",r=>{if(T.value){if(r.key==="ArrowUp")E();else if(r.key==="ArrowDown")D();else if(r.key==="Enter"){const i=k.value.contents[c.value];a.path!==i.path&&(v(i),p.push(i.path),P())}}}),w(b.value,{reserveScrollBarGap:!0})}),ae(()=>{V()}),()=>e("div",{class:["search-pro-result",{empty:t.value===""?u.value.length===0:!T.value}],ref:b},t.value===""?u.value.length?e("ul",{class:"search-pro-result-list"},e("li",{class:"search-pro-result-list-item"},[e("div",{class:"search-pro-result-title"},s.value.history),u.value.map((r,i)=>e(Y,{to:r.path,class:["search-pro-result-item",{active:c.value===i}],onClick:()=>{console.log("click"),P()}},()=>[e(G,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[r.type==="content"&&r.header?e("div",{class:"content-header"},r.header):null,e("div",X(r))]),e("button",{class:"search-pro-close-icon",onClick:g=>{g.preventDefault(),g.stopPropagation(),m(i)}},e(M))]))])):s.value.emptyHistory:T.value?e("ul",{class:"search-pro-result-list"},d.value.map(({title:r,contents:i},g)=>{const H=n.value===g;return e("li",{class:["search-pro-result-list-item",{active:H}]},[e("div",{class:"search-pro-result-title"},r||"Documentation"),i.map((y,I)=>{const R=H&&c.value===I;return e(Y,{to:y.path,class:["search-pro-result-item",{active:R,"aria-selected":R}],onClick:()=>{v(y),P()}},()=>[y.type==="content"?null:e(y.type==="title"?O:y.type==="heading"?A:x,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[y.type==="content"&&y.header?e("div",{class:"content-header"},y.header):null,e("div",X(y))])])})])})):s.value.emptyResult)}});export{fe as default};
